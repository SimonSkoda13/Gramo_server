"use strict";
/*
 * Copyright (c) 2021-2021.
 * Author Peter Placzek (tada5hi)
 * For the full copyright and license information,
 * view the LICENSE file that was distributed with this source code.
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.buildQuery = void 0;
const parameter_1 = require("../parameter");
const parameter_2 = require("../parameter");
const parameter_3 = require("../parameter");
const parameter_4 = require("../parameter");
const type_1 = require("../type");
const utils_1 = require("../utils");
function buildQuery(input, options) {
    var _a, _b, _c, _d, _e;
    if (typeof input === 'undefined' ||
        input === null) {
        return '';
    }
    let query = {};
    if (typeof input[type_1.Parameter.FIELDS] !== 'undefined' ||
        typeof input[type_1.URLParameter.FIELDS] !== 'undefined') {
        const fields = (_a = input[type_1.Parameter.FIELDS]) !== null && _a !== void 0 ? _a : input[type_1.URLParameter.FIELDS];
        query[type_1.URLParameter.FIELDS] = (0, parameter_1.buildQueryFields)(fields);
    }
    if (typeof input[type_1.Parameter.FILTERS] !== 'undefined' ||
        typeof input[type_1.URLParameter.FILTERS] !== 'undefined') {
        const value = (_b = input[type_1.Parameter.FILTERS]) !== null && _b !== void 0 ? _b : input[type_1.URLParameter.FILTERS];
        query[type_1.URLParameter.FILTERS] = (0, parameter_2.buildQueryFilters)(value);
    }
    if (typeof input[type_1.Parameter.PAGINATION] !== 'undefined' ||
        typeof input[type_1.URLParameter.PAGINATION] !== 'undefined') {
        query[type_1.URLParameter.PAGINATION] = (_c = input[type_1.Parameter.PAGINATION]) !== null && _c !== void 0 ? _c : input[type_1.URLParameter.PAGINATION];
    }
    if (typeof input[type_1.Parameter.RELATIONS] !== 'undefined' ||
        typeof input[type_1.URLParameter.RELATIONS] !== 'undefined') {
        const value = (_d = input[type_1.Parameter.RELATIONS]) !== null && _d !== void 0 ? _d : input[type_1.URLParameter.RELATIONS];
        query[type_1.URLParameter.RELATIONS] = (0, parameter_3.buildQueryRelations)(value);
    }
    if (typeof input[type_1.Parameter.SORT] !== 'undefined' ||
        typeof input[type_1.URLParameter.SORT] !== 'undefined') {
        const value = (_e = input[type_1.Parameter.SORT]) !== null && _e !== void 0 ? _e : input[type_1.URLParameter.SORT];
        query[type_1.URLParameter.SORT] = (0, parameter_4.buildQuerySort)(value);
    }
    return (0, utils_1.buildURLQueryString)(query);
}
exports.buildQuery = buildQuery;
//# sourceMappingURL=module.js.map